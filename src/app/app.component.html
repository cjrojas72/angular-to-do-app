<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <textarea [(ngModel)]="taskObj.taskName" id="" class="form-control" cols="3" placeholder="Add a New Task"></textarea>
            </div>
        </div>
        <div class="row pt-2">
            <div class="col-3">
                <input type="date" [(ngModel)]="taskObj.dueDate" class="form-control" id="" placeholder="Due Date">
            </div>
            <div class="col-7">
                <input type="text" [(ngModel)]="taskObj.tags" class="form-control" id="" placeholder="Enter Comma Seperated tags">
            </div>
            <div class="col-2">
                <div class="d-grid">
                    <button class="btn btn-success btn-block" (click)="createNewTask()">Add Task</button>
                </div> 
            </div>
        </div>
        <div class="row pt-2">
            <div class="col-12">
                <button class="btn" [ngClass]="filterType=='all' ? 'btn-primary disabled':'btn-secondary'" (click)="setFilter('all')">Show All</button>
                <button class="btn" [ngClass]="filterType=='completed' ? 'btn-primary disabled':'btn-secondary'" (click)="setFilter('completed')">Show Completed</button>
                <button class="btn" [ngClass]="filterType=='in-progress' ? 'btn-primary disabled':'btn-secondary'" (click)="setFilter('in-progress')">Show In-Progress</button>
            </div> 
        </div>
        <div class="row pt-2">
            <div class="col-12">
                <!-- <button [ngClass]="isShowAllTags ?  'btn btn-sm btn-primary' : 'btn btn-sm btn-secondary' " (click)="toggleShowAllTags()">Show All</button>
                <button class="btn btn-secondary btn-sm" *ngFor="let tag of tagsList" >{{ tag }}</button> -->
                <div style="display: flex;">
                    <div>
                        <button class="btn btn-sm" [ngClass]="selectedTag == 'all'? 'btn-primary': 'btn-secondary'" (click)="setTagFilter('all')">All</button> 
                    </div>
                    <div *ngFor="let tag of tagsList">
                        <button class="btn btn-sm" [ngClass]="selectedTag == tag? 'btn-primary': 'btn-secondary'" (click)="setTagFilter(tag)">{{ tag }}</button>
                    </div>
                </div>
                
                <!-- <button class="btn btn-secondary btn-sm">Office</button>
                <button class="btn btn-secondary btn-sm">Motivation</button> -->
            </div> 
        </div>

        <div class="col-12 mt-5">
            <h4>Showing all tasks with tag " {{ selectedTag }} "</h4>
        </div>


        <div class="row pt-3">
          <div class="col-12">
              <table class="table table-bordered table-striped table-sm">
                  <thead>
                      <tr>
                          <th><strong>Index</strong></th>
                          <th><strong>Task Name</strong></th>
                          <th><strong>Due Date</strong></th>
                          <th class="text-center"><strong>Tags</strong></th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let task of taskList; let sr=index">
                          <td style="text-align: center;">{{ sr + 1}}</td>
                          <td>
                              <div class="row">
                                  <div class="col-1">
                                      <input (change)="onTaskComplete()" [(ngModel)]="task.isCompleted" type="checkbox">
                                  </div>
                                  <div class="col-6">
                                      {{ task.taskName }}
                                  </div>
                                  <div class="col-4 text-end ">
                                      <i class="fa fa-close text-secondary px-3 text-danger "></i>
                                  </div>
                              </div>
                          </td>
                          <td> {{ task.dueDate | date: 'dd-MM-yy' }}</td>
                          <td class="text-center">
                              <button class="btn btn-warning btn-sm rounded-btn" *ngFor="let tag of getCommaSeperatedValues(task.tags)">{{ tag }}</button>
                              <!-- <button class="btn btn-secondary btn-sm rounded-btn">fitness</button>
                              <button class="btn btn-success btn-sm rounded-btn">default</button> -->
                          </td>
                          <td class="text-center">
                            <button (click)="onRemove(sr)" class="btn btn-danger btn-sm">Delete</button>
                          </td>
                      </tr>
                  </tbody>
              </table>
          </div>

      </div>
      
    </div>
    
</body>
</html>